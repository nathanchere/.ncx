#!/bin/bash

LOGDIR=~/.local/log
LOGFILE=$LOGDIR/reui
mkdir -p $LOGDIR
touch $LOGFILE

main() {

  killall -q polybar compton dunst tint2

  while pgrep -x polybar >/dev/null; do sleep 1; done
  while pgrep -x compton >/dev/null; do sleep 1; done
  while pgrep -x tint2 >/dev/null; do sleep 1; done

  dunst &
  compton &
  tint2 -c ~/.config/tint2/tint2rc-bottom &
  tint2 -c ~/.config/tint2/tint2rc-top &
  tint2 -c ~/.config/tint2/tint2rc-left &
  tint2 -c ~/.config/tint2/.tint2.ncx.left &
  #tint2 -c ~/.tint2.ncx.left
  polybar top &
  feh --bg-scale --force-aliasing --randomize --no-fehbg "$HOME/.ncx/resources/wallpaper/pixel/plato_by_fool-d74d48d.png" &
}

main 2>&1 |& tee -a "$LOGFILE"
echo "done"
